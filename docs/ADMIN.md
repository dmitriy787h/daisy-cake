# Административная панель - Управление конструктором тортов

## Обзор

Этот документ описывает, как администраторы могут управлять опциями конструктора тортов, изменять цены и добавлять новые элементы.

## Структура данных

Все данные конструктора хранятся в файле `src/data/cakeData.ts`. Этот файл содержит:

- **Размеры тортов** (`cakeSizes`)
- **Слои тортов** (`cakeLayers`) 
- **Начинки** (`fillings`)
- **Декор** (`decorations`)
- **Упаковка** (`packaging`)

## Добавление нового размера торта

```typescript
export const cakeSizes: CakeSize[] = [
  // ... существующие размеры
  {
    id: 'extra-large',           // Уникальный ID
    name: 'Очень большой',       // Название для пользователей
    diameter: 32,                // Диаметр в см
    servings: 20,                // Количество порций
    basePrice: 4000,             // Базовая цена
    height: 14                   // Высота в см
  }
];
```

## Добавление нового слоя торта

```typescript
export const cakeLayers: CakeLayer[] = [
  // ... существующие слои
  {
    id: 'carrot-cake',           // Уникальный ID
    name: 'Морковный торт',      // Название
    price: 150,                  // Дополнительная стоимость
    image: '/images/carrot.jpg', // Путь к изображению
    description: 'Полезный морковный торт с орехами',
    allergens: ['орехи', 'яйца'], // Аллергены
    isGlutenFree: false,         // Без глютена
    isVegan: false               // Веганский
  }
];
```

## Добавление новой начинки

```typescript
export const fillings: Filling[] = [
  // ... существующие начинки
  {
    id: 'lemon-curd',            // Уникальный ID
    name: 'Лимонный курд',       // Название
    price: 200,                  // Дополнительная стоимость
    image: '/images/lemon.jpg',  // Путь к изображению
    description: 'Кисло-сладкий лимонный курд',
    allergens: ['яйца', 'молоко'], // Аллергены
    isGlutenFree: true,          // Без глютена
    isVegan: false               // Веганский
  }
];
```

## Добавление нового декора

```typescript
export const decorations: Decoration[] = [
  // ... существующий декор
  {
    id: 'chocolate-drip',        // Уникальный ID
    name: 'Шоколадная капель',   // Название
    price: 400,                  // Дополнительная стоимость
    image: '/images/drip.jpg',   // Путь к изображению
    description: 'Элегантная шоколадная капель',
    allergens: ['молоко'],       // Аллергены
    isGlutenFree: true,          // Без глютена
    isVegan: false               // Веганский
  }
];
```

## Добавление новой упаковки

```typescript
export const packaging: Packaging[] = [
  // ... существующая упаковка
  {
    id: 'eco-friendly',          // Уникальный ID
    name: 'Эко-упаковка',        // Название
    price: 100,                  // Дополнительная стоимость
    image: '/images/eco.jpg',    // Путь к изображению
    description: 'Экологически чистая упаковка'
  }
];
```

## Изменение цен

Для изменения цены на существующий элемент:

1. Откройте `src/data/cakeData.ts`
2. Найдите нужный элемент по ID
3. Измените поле `price` или `basePrice`
4. Сохраните файл
5. Перезапустите сервер разработки

## Валидация данных

При добавлении новых элементов убедитесь, что:

- ✅ ID уникален в рамках массива
- ✅ Название не пустое
- ✅ Цена - положительное число
- ✅ Описание заполнено
- ✅ Аллергены указаны корректно
- ✅ Изображение существует по указанному пути

## Тестирование изменений

После внесения изменений:

1. Запустите тесты: `npm test`
2. Проверьте конструктор в браузере
3. Убедитесь, что цены пересчитываются корректно
4. Проверьте, что новые элементы отображаются

## Пример полного процесса добавления

1. **Добавьте данные** в соответствующий массив в `cakeData.ts`
2. **Добавьте изображение** в папку `public/images/`
3. **Запустите тесты**: `npm test`
4. **Проверьте в браузере**: http://localhost:3000/constructor
5. **Убедитесь в корректности** отображения и расчета цены

## Troubleshooting

### Элемент не отображается
- Проверьте, что ID уникален
- Убедитесь, что нет синтаксических ошибок в TypeScript
- Проверьте консоль браузера на ошибки

### Цена не пересчитывается
- Убедитесь, что поле `price` - число
- Проверьте, что элемент добавлен в правильный массив
- Перезапустите сервер разработки

### Ошибки TypeScript
- Проверьте соответствие типов интерфейсам
- Убедитесь, что все обязательные поля заполнены
- Проверьте правильность типов данных
